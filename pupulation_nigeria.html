<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <!-- Load icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">



    <!-- External Stylesheet -->
    <link rel="stylesheet" href="population_styles.css">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title> Population in Nigeria by State </title>
  </head>

  <body>

      <div class="container-fluid">
        <h1>Population by State</h1>
      </div>

      <!--Display message here -->
      <div><p><span id = "display_message"></span> </p></div>


    <!-- The form -->

    <div class="container">

    <form class="example" id="population_form" method="get">

      <input type="text" class="form-control" id="user_input" placeholder="Which state in Nigeria would you like to know the population size?" name="search">

      <button type="submit" class="btn btn-primary mb-2" id="submit"
                onclick="displayInHtmt()" > Search <i class="fa fa-search"></i></button>

    </form>
  </div>



    <!-- JavaScript documentation goes here-->

    <script type="text/javascript">

      //gets user input from html form above
      function userInput(){

        //define state

        let setState = document.getElementById("user_input").value;


        setState = setState.trim()
        return(setState)


      }; //Pass test



      function StateAndPopulation(){

        //Object that contains state and population size
        
        const statePopulation = {

          'Abia':'172828', 'Benue':'238930', 'Cross River': '30212',
          'Brono': '1612', 'Delta': '1175', 'Ebonyi': '1726',
          'Edo': '1179', 'Ekiti': '1729', 'Enugu': '1730',
          'Gombe': '1731', 'Imo': '1732', 'Jigawa': '1733',
          'Kaduna': '1734', 'Kano': '1735', 'Katsina': '1736',
          'Kebbi': '1737', 'Kogi': '1738', 'Kwara': '1739',
          'Lagos': '1740', 'Nasarawa': '1741', 'Niger': '1742',
          'Ogun': '1743', 'Ondo': '1744', 'Osun': '1745',
          'Oyo': '1746', 'Plateau': '1747', 'Rivers': '1748',
          'Sokoto': '1749', 'Taraba': '1750', 'Yobe': '1751',
          'Zamfara': '1752'

        }

        return statePopulation
  
      }//Pass test


      //Function checks to see if user entry is a valid state

      function validation(){

        //Declaring and defining
        //Variable contains user input
        let state = userInput()


        


        //This function convert all object keys to lower case, and also user entry to lower case.  

        function objKeysToLowerCase(){

          const lowercaseKeys = obj =>

          Object.keys(obj).reduce((acc, key) => {

            acc[key.toLowerCase()] = obj[key];

            return acc;

          }, {});

        const myObjLower = lowercaseKeys(StateAndPopulation());

        return myObjLower

        }
        

        //Check to see if sate is valid
        //Returns true or false
        let isStateValid =  state.toLowerCase() in objKeysToLowerCase()


        //Print false or true
        //alert(isStateValid)


        //use if statement Test to see if state is valid
        if (isStateValid == true){


          //Copy state and population size into a new object
          statePopulationObj = objKeysToLowerCase()


          //Get population size of the entered state
          let populationSize = statePopulationObj[state.toLowerCase()]

          //Message
          let msg = state + " has a population of " + populationSize + " people";

          //alert(msg)
          return (msg)
           
        }else{

          let errorMsg = "Please enter a valid state to get population size"
          //alert(errorMsg)
          return(errorMsg)
          
        }

      }//Pass test




      //Function Display mesage in html 

      function displayInHtmt(){

        let msg = validation()
        
        alert(msg)

        /* if the code bellow is uncommented, it will display output on windows in an html format
        At the moment, it does display, then disapear. still trying to find the bug that is casusing that.
        other than that, the code runs good and I have done majority of the error handling
        */

        let htmlMsg = document.getElementById("display_message").innerHTML = msg;


      }

      

    
    
    </script>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
  </body>
</html>